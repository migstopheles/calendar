(function(){var a=!!window.jQuery,b=!!document.querySelectorAll,e={isArray:function(n){return n instanceof Array||!!n.length},make:function(o,p){var q=document.createElement(o);if(p){for(var n in p){q[n]=p[n]}}return q},query:(function(){return b?function(n,o){return n.nodeType?[n]:(o||document).querySelectorAll(n)}:a?function(n,o){return $(n,(o||null)).toArray()}:function(n,o){return[n+" - dependency required"]}})(),foreach:function(q,p){if(q.forEach){return q.forEach(p)}if(this.isArray(q)){for(var o=0,n=q.length;o<n;){p.call(q[o],q[o],o++)}}else{for(var o in q){p.call(q[o],q[o],o)}}},removeAllChildren:function(o){var n=o.childNodes;while(n&&n.length>0){o.removeChild(n[n.length-1])}}},m=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],c=(function(){var o=[31,28,31,30,31,30,31,31,30,31,30,31],s=["January","February","March","April","May","June","July","August","September","October","November","December"],q=[],p=-1;while(++p<o.length){var r=new Number(o[p]);r.monthName=s[p];q.push(r)}return q})(),h=(function(){var q=new Date(),o=q.getFullYear(),p=q.getMonth(),n=q.getDate();return new Date(o,p,n)})(),d=function(n){var o="cal-day";if(!n.available){o+=" unavailable"}if(n.isPast){o+=" past"}if(n.isToday){o+=" today"}if(n.isNextMonth){o+=" next-month"}else{if(n.isPrevMonth){o+=" prev-month"}else{o+=" this-month"}}return e.make("span",{innerHTML:n.dayofmonth,className:o})},g=function(n,o){this.weekday=new Number(n.getDay());this.weekday.name=m[this.weekday];this.dayofmonth=n.getDate();this.monthName=c[n.getMonth()].monthName;this.available=n.getTime()>=h.getTime();this.isNextMonth=n.getMonth()>o.getMonth();this.isPrevMonth=n.getMonth()<o.getMonth();this.iscurrent_month=n.getMonth()===o.getMonth();this.isPast=n.getTime()<h.getTime();this.isToday=n.getTime()===h.getTime();this.raw_date=n},j=function(){var n=this;this.next_btn=e.make("a",{className:"cal-nav cal-next",innerHTML:"&raquo;"});this.prev_btn=e.make("a",{className:"cal-nav cal-prev",innerHTML:"&laquo;"});this.month_label=e.make("span",{className:"cal-month"});this.calendar_node=e.make("div",{className:"cal-header"});e.foreach(m,function(o){n.calendar_node.appendChild(e.make("span",{innerHTML:o.substring(0,1).toUpperCase(),className:"cal-day-head"}))})},k=function(p,n){var o=new j;this.date_offset=n;this.date=new Date(h.getFullYear(),h.getMonth()+this.date_offset);this.current_month=c[this.date.getMonth()].monthName.toLowerCase();this.current_monthNum=this.date.getMonth();this.current_year=this.date.getFullYear();this.dom_node=e.make("div",{className:"calendar-pane"});this.next_btn=o.next_btn;this.prev_btn=o.prev_btn;this.next_btn=o.next_btn;this.month_label=o.month_label;this.calendar_node=o.calendar_node;this.next_btn.onclick=function(){p.showNextMonth()};this.prev_btn.onclick=function(){p.showPrevMonth()}},i=function(p,o,n){this.date_information=new g(p,o);this.dom_node=null;this.calendar=n;this.selected=false};i.prototype={select:function(){if(!this.date_information.available){return}this.calendar.selected_day=this;this.calendar.selected_dates.push(this);this.selected=true;this.dom_node.className+=" selected"},unSelect:function(){var n=this.calendar.selected_dates.length;while(n--){if(this.calendar.selected_dates[n]===this){this.calendar.selected_dates.splice(n,1)}}this.calendar.selected_day=null;this.selected=false;this.dom_node.className=this.dom_node.className.replace(" selected","")},toggleSelect:function(){if(!this.selected){this.select()}else{this.unSelect()}}};var l=function(s,p){var o=this;this.config=p||{};this.dom_node=s;this.panes=[];e.removeAllChildren(this.dom_node);var q=this.config.panes||1;var n=0;while(q--){var r=new k(this,n);this.dom_node.appendChild(r.dom_node);this.panes.push(r);n+=this.config.interval}this.date=null;this.selected_dates=[];this.calendar_info={current_month:{}};this.set_date(new Date());this.selected_day=null};l.prototype.set_date=function(o){var n=this;if(o){if(o instanceof Date){this.date=o}else{this.date=new Date(o)}}else{this.date=new Date()}e.foreach(this.panes,function(p){if(!!n.calendar_info[p.current_month+p.current_year]){p.dom_node.removeChild(n.calendar_info[p.current_month+p.current_year].html)}p.date=new Date(n.date.getFullYear(),n.date.getMonth()+p.date_offset);p.current_month=c[p.date.getMonth()].monthName.toLowerCase();p.current_monthNum=p.date.getMonth();p.current_year=p.date.getFullYear();n.set_data(p.date)});this.current_month=c[this.date.getMonth()].monthName.toLowerCase();this.current_monthNum=this.date.getMonth();this.current_year=this.date.getFullYear();this.calendar_info.current_month=this.calendar_info[this.current_month+this.current_year];this.showMonth();this.onMonthChanged.call(this)};l.prototype.showNextMonth=function(){var n=new Date(this.date.getFullYear(),this.date.getMonth()+1);this.set_date(n)};l.prototype.showPrevMonth=function(){var n=new Date(this.date.getFullYear(),this.date.getMonth()-1);this.set_date(n)};l.prototype.showMonth=function(){var n=this;e.foreach(this.panes,function(o){o.month_label.innerHTML=o.current_month.substring(0,3)+" "+o.current_year;o.dom_node.appendChild(o.prev_btn);o.dom_node.appendChild(o.month_label);o.dom_node.appendChild(o.next_btn);o.dom_node.appendChild(o.calendar_node);o.dom_node.appendChild(n.calendar_info[o.current_month+o.current_year].html);n.dom_node.appendChild(o.dom_node)})};l.prototype.toggleDay=function(n){n.toggleSelect();if(n.selected){this.onDaySelected.call(this,n)}else{this.onDayUnSelected.call(this,n)}};l.prototype.selectDay=function(n){n.select();this.onDaySelected.call(this,n)};l.prototype.unSelectDay=function(n){n.unSelect();this.onDayUnSelected.call(this,n)};l.prototype.set_data=function(q){var w=this;var v=q.getFullYear();var n=q.getMonth();var u=c[n].monthName.toLowerCase();if(!!this.calendar_info[u+v]){return}var r=[];var s=e.make("div",{className:"calendar-holder clearfix"});var p=(function(){var y;var x=new Date(v,n,1);return x.getDay()===0?x:new Date(v,n,1-x.getDay())})();var o=(function(){var y;var x=new Date(v,n,c[n]);if(x.getDay()===6){return new Date(x.getFullYear(),x.getMonth(),x.getDate()+1)}else{return new Date(v,n,x.getDate()+(7-x.getDay()))}})();while(p<o){var t=new i(p,q,this);t.dom_node=d(t.date_information);t.dom_node.onclick=(function(x){return function(){w.toggleDay(x)}})(t);r.push(t);s.appendChild(t.dom_node);p=new Date(p.getFullYear(),p.getMonth(),p.getDate()+1)}this.calendar_info[u+v]={data:r,html:s};return r};l.prototype.getDay=function(p,r,n){var q;if(p instanceof Date){q=p}else{if(c[r]<n){n-=c[r];r++}if(r>=12){r=0;p++}q=new Date(p,r,n)}var s=this.calendar_info[c[r].monthName.toLowerCase()+p];if(s){s=s.data}else{s=this.set_data(q)}var o=-1;var n;while(++o<s.length){n=s[o].date_information.raw_date;if(n.toString()===q.toString()){return s[o]}}return null};l.prototype.onDaySelected=function(){};l.prototype.onDayUnSelected=function(){};l.prototype.onMonthChanged=function(){};var f=function(n,p){var q;var o=this;this.widgets=[];if(!!n.nodeName){q=[n]}else{if(typeof n==="string"){q=e.query(n)}else{q=n}}e.foreach(q,function(s){var r=new l(s,p);o.widgets.push(r)})};window.PageCalendars=f})();